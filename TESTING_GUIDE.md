# 🎮 遊戲測試指南

## ✅ 已完成的功能

### 1. **Minimap 顯示系統** ✓
- ✅ 出口點：綠色星星 ★（會發光脈動）
- ✅ 怪物：粉紅色圓點 ●（帶白色邊框）
- ✅ 玩家：綠色圓點 ●（帶方向指示）
- ✅ 房間顏色：6 種不同顏色的房間類型
- ✅ 點擊 Minimap 可傳送

### 2. **怪物 AI 系統** ✓
**已完全實現**（位置在 src/entities/monster.js）：
- ✅ **巡邏模式 (PATROL)**：怪物會隨機在附近巡邏
- ✅ **追逐模式 (CHASE)**：看到玩家後會追逐
- ✅ **視野系統**：90度視野範圍，10格偵測距離
- ✅ **碰撞傷害**：每秒扣 10 HP
- ✅ **路徑尋找**：使用 A* 算法避開牆壁

**目前狀態**：
- 使用紅色方塊作為 placeholder（測試用）
- AI 系統完全運作中
- 在 Minimap 上顯示粉紅色點

### 3. **遊戲機制** ✓
- ✅ 生命值系統（100 HP）
- ✅ 計時器（MM:SS 格式）
- ✅ 出口點（綠色傳送門，帶動畫）
- ✅ 勝利/失敗判定
- ✅ 遊戲結束畫面（顯示統計數據）

### 4. **調試/作弊面板** ✓
按 **`** 鍵顯示 Debug 按鈕，可以：
- 傳送到任意位置
- 控制生命值
- 控制時間
- 調整速度
- 無敵模式

### 5. **面板操作問題** ✓
- ✅ 打開面板時自動釋放滑鼠鎖定
- ✅ 點擊遊戲畫面重新鎖定滑鼠
- ✅ 可以正常操作所有按鈕

### 6. **房間閃爍效果** 💡
**這是設計的特效！**

位置：`src/rendering/lighting.js`

模擬 **Backrooms 風格**的老舊辦公室螢光燈：
- 每 5-13 秒隨機閃爍一次
- 持續 0.1-0.4 秒
- 營造恐怖氛圍

**如果不想要閃爍效果**，可以在 lighting.js 中：
```javascript
// 將 line 54-76 的閃爍邏輯註解掉
```

---

## 🎯 測試步驟

### 測試 1: Minimap 顯示
1. 啟動遊戲：http://localhost:3001/
2. 點擊「開始遊戲」
3. **檢查右上角 Minimap**：
   - ✅ 應該看到綠色星星 ★（出口）
   - ✅ 應該看到粉紅色圓點 ●（怪物）
   - ✅ 應該看到綠色圓點 ●（玩家）
   - ✅ 不同顏色的房間

### 測試 2: 怪物 AI 系統
1. 按 **`** 鍵打開 Debug 按鈕
2. 點擊 **Debug** 按鈕
3. 按 **→ Monster** 傳送到怪物位置
4. **觀察怪物行為**：
   - ✅ 怪物應該會在附近移動（巡邏）
   - ✅ 靠近怪物時會被追逐
   - ✅ 碰到怪物會扣血（每秒 -10 HP）
   - ✅ Minimap 上的粉紅點會跟著移動

### 測試 3: 勝利流程
1. 打開 Debug 面板
2. 按 **→ Exit** 傳送到出口
3. 靠近綠色傳送門
4. **應該自動顯示勝利畫面**

### 測試 4: 失敗流程
方法 1：被怪物殺死
1. 按 **10%** 降低血量到 10
2. 按 **→ Monster** 傳送到怪物
3. 等待怪物扣血至 0
4. **應該顯示失敗畫面**

方法 2：直接觸發
1. 按 **Force Lose** 按鈕
2. **立即顯示失敗畫面**

### 測試 5: 面板操作
1. 按 **Tab** 打開設置面板
   - ✅ 滑鼠應該被釋放
   - ✅ 可以點擊滑桿調整設定
2. 點擊遊戲畫面
   - ✅ 滑鼠重新鎖定
   - ✅ 可以繼續玩遊戲

### 測試 6: 無敵模式
1. 打開 Debug 面板
2. 勾選 **⭐ God Mode**
3. 傳送到怪物
4. **應該不會扣血**

---

## 🐛 已知問題

### 怪物模型顯示
**狀態**：目前使用紅色方塊 placeholder

**原因**：
- GLB 模型載入之前遇到問題
- 為了加快開發進度，改用測試用方塊

**解決方案**：
- AI 系統已經完全實現
- 只需要修復模型載入即可
- 模型路徑：`public/models/*.glb`

---

## 🎮 控制方式

### 基本控制
- **WASD**：移動
- **滑鼠**：視角
- **Shift**：衝刺
- **ESC**：暫停/釋放滑鼠
- **Tab**：設定面板
- **`** (反引號)：Debug 按鈕

### Debug 面板快捷操作
- 傳送到出口：快速測試勝利
- 傳送到怪物：快速測試戰鬥
- 5x 速度：快速探索地圖
- God Mode：無敵測試

---

## 📊 系統狀態

| 功能 | 狀態 | 說明 |
|------|------|------|
| Minimap 出口顯示 | ✅ 完成 | 綠色星星會脈動 |
| Minimap 怪物顯示 | ✅ 完成 | 粉紅色圓點 |
| 怪物 AI（巡邏） | ✅ 完成 | 隨機巡邏 |
| 怪物 AI（追逐） | ✅ 完成 | 視野偵測 |
| 怪物 AI（移動） | ✅ 完成 | A* 路徑尋找 |
| 怪物視覺模型 | ⚠️ Placeholder | 紅色方塊 |
| 碰撞傷害 | ✅ 完成 | 每秒 -10 HP |
| 出口碰撞 | ✅ 完成 | 自動勝利 |
| 面板操作 | ✅ 完成 | 自動釋放滑鼠 |
| Debug 工具 | ✅ 完成 | 完整功能 |
| 閃爍特效 | ✅ 設計特色 | Backrooms 風格 |

---

## 🔍 Console 調試訊息

打開瀏覽器 Console (F12) 可以看到：
- `👹 Monster manager created`
- `✅ Spawned X test monsters`
- `📍 Monster positions: [...]`
- `🔧 DEBUG: ...` （調試訊息）

如果看不到怪物在 Minimap 上，檢查 Console 是否有：
- Monster positions 陣列是否有資料
- Minimap 是否有渲染錯誤

---

## 💡 建議測試順序

1. **基本功能測試**（5分鐘）
   - 啟動遊戲
   - 檢查 Minimap 是否顯示所有元素
   - WASD 移動測試

2. **怪物系統測試**（5分鐘）
   - 打開 Debug 面板
   - 傳送到怪物
   - 觀察 AI 行為
   - 測試碰撞傷害

3. **遊戲機制測試**（5分鐘）
   - 測試勝利流程
   - 測試失敗流程
   - 檢查統計數據

4. **Debug 工具測試**（5分鐘）
   - 測試所有傳送功能
   - 測試生命值控制
   - 測試速度調整
   - 測試 God Mode

---

## 🎉 下一步

如果所有測試通過，接下來可以：
1. **修復怪物模型顯示**（載入 GLB 模型）
2. **添加音效**（腳步聲、怪物聲、環境音）
3. **優化性能**（大地圖卡頓問題）
4. **添加更多房間類型**
5. **添加道具系統**（血包、鑰匙等）
